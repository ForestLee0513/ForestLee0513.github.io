{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/blog/styled-components의-theme에-타입-적용하기/",
    "result": {"data":{"site":{"siteMetadata":{"title":"이우림","siteUrl":"https://forestlee0513.github.io"}},"markdownRemark":{"id":"adbe820e-32d4-5d5d-a889-1b968e68bba0","excerpt":"잃어버린 theme 타입을 찾아서… React에서 styled-components를 사용하다 보면 전역 theme 변수를 지정해야 하는 상황이 생길 것입니다.  타입 선언 없이 theme를 불러올 때 theme 타입 상단 이미지와 같이 TypeScript와 styled…","html":"<h2>잃어버린 theme 타입을 찾아서…</h2>\n<p>React에서 styled-components를 사용하다 보면 전역 theme 변수를 지정해야 하는 상황이 생길 것입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 439px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e88ca52226c0cdc42502daf9f38dcb75/e3b18/without-declare.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 15.18987341772152%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAt0lEQVQI1z3IW3KCMABAUZbQECpIIIRg5CmQgNSp03H/q7rO+NHzeaLilPJ9Sollgusm1u1gCTvTvGKbhmkNHI8niw/4sHEdJvx+x1jLPpT83CpMpVnDhjGG6GJyXJ1jtOL163k9d9Z55AgjnTP4uefv4dnCQtePVLXFtS1FqWmqM51VFCr/nFKKaG41t7bEWc2xXFh6Q60zhuaMqxWtzeltSn+1ZFmGEF8IIZBSEscJIpZImfzfGzheVRpxL319AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"타입 선언 없이 theme를 불러올 때 theme 타입\"\n        title=\"타입 선언 없이 theme를 불러올 때 theme 타입\"\n        src=\"/static/e88ca52226c0cdc42502daf9f38dcb75/e3b18/without-declare.png\"\n        srcset=\"/static/e88ca52226c0cdc42502daf9f38dcb75/c26ae/without-declare.png 158w,\n/static/e88ca52226c0cdc42502daf9f38dcb75/6bdcf/without-declare.png 315w,\n/static/e88ca52226c0cdc42502daf9f38dcb75/e3b18/without-declare.png 439w\"\n        sizes=\"(max-width: 439px) 100vw, 439px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>타입 선언 없이 theme를 불러올 때 theme 타입</p>\n<p>상단 이미지와 같이 TypeScript와 styled-components가 적용된 프로젝트에서 theme를 적용할 수 있지만 작업하다 보면 자동완성이 되지 않는 것을 확인할 수 있습니다.</p>\n<p>그 이유는 styled-components에 있는 DefaultTheme 타입이 any로 지정되어 있어 TypeScript에서 에러가 발생하지 않지만 any 타입으로 지정되어 있어 올바른 객체로 접근할 수 있는지 확인할 수 없는 단점이 생깁니다.</p>\n<h2>적용하기 전 필요한 개념 확인</h2>\n<h3><a href=\"https://www.typescriptlang.org/ko/docs/handbook/declaration-files/by-example.html\">declare</a></h3>\n<p>주로 변수, 상수, class, module 등이 이미 선언되었다는 것을 선언하는 문법입니다. 이번 포스트에서는 module을 declare 하는 방법을 다루고 있습니다.</p>\n<p>또한 이 포스트에는 외부 라이브러리를 선언하는 방법도 포함되어 있으니 <a href=\"https://www.typescriptlang.org/ko/docs/handbook/declaration-files/library-structures.html\">TypeScript 문서에 포함된 Library Structures</a>을 참고하시면 됩니다.</p>\n<p>선언된 변수들을 파일에 별도로 포함할 수 있는데, 이 파일의 확장명은 <code class=\"language-text\">.d.ts</code>입니다.</p>\n<p>이 <code class=\"language-text\">d.ts</code>안에서는 선언부만 포함되어 있고 구현부는 포함 되지 않은게 특징입니다.</p>\n<h3><a href=\"https://www.typescriptlang.org/docs/handbook/2/typeof-types.html#the-typeof-type-operator\">typeof</a></h3>\n<p>TypeScript에서 변수의 타입을 유추하기 위한 문법입니다.</p>\n<p>이미 JavaScript에서도 존재하는 문법이지만 TypeScript에서도 Type 선언을 위해 사용할 수 있으며, 객체에서 사용할 경우 JavaScript에선 <code class=\"language-text\">object</code>이라고만 출력 되지만 TypeScript에서는 해당 객체 안에 있는 값의 타입까지 유추합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// Example</span>\n<span class=\"token comment\">// as const로 상수 처리 후 아래와 같이 ThemeValue를 추가한다면 더욱 안전한 Union 타입으로 지정 가능합니다.</span>\n<span class=\"token keyword\">const</span> theme <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  colors<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    primary<span class=\"token operator\">:</span> <span class=\"token string\">\"blue\"</span><span class=\"token punctuation\">,</span>\n    secondary<span class=\"token operator\">:</span> <span class=\"token string\">\"lightgray\"</span><span class=\"token punctuation\">,</span>\n    white<span class=\"token operator\">:</span> <span class=\"token string\">\"#fff\"</span><span class=\"token punctuation\">,</span>\n    black<span class=\"token operator\">:</span> <span class=\"token string\">\"#000\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  font<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    family<span class=\"token operator\">:</span> <span class=\"token string\">\"Spoqa Han Sans Neo\"</span><span class=\"token punctuation\">,</span>\n    baseSize<span class=\"token operator\">:</span> <span class=\"token string\">\"16px\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  container<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    maxWidth<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      pc<span class=\"token operator\">:</span> <span class=\"token string\">\"1200px\"</span><span class=\"token punctuation\">,</span>\n      tablet<span class=\"token operator\">:</span> <span class=\"token string\">\"700px\"</span><span class=\"token punctuation\">,</span>\n      mobile<span class=\"token operator\">:</span> <span class=\"token string\">\"500px\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">const</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Theme</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> theme\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">ThemeValue</span> <span class=\"token operator\">=</span> Theme<span class=\"token punctuation\">[</span><span class=\"token keyword\">keyof</span> Theme<span class=\"token punctuation\">]</span></code></pre></div>\n<h2>theme 타입 선언하기</h2>\n<blockquote>\n<p>필자는 declare 파일을 src/types 폴더에 생성하는 것으로 진행했으나, 본인이 관리하기 편한 위치에 생성하셔도 괜찮습니다.</p>\n</blockquote>\n<p>styled-component에 있는 theme의 기본 타입이 any라는 것을 알았으니 한번 적용해 봅시다.</p>\n<p>먼저 상단 예제에 있는 theme.ts에서 Theme라는 type를 typeof로 export합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// theme.ts</span>\n<span class=\"token comment\">// ...</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">type</span> <span class=\"token class-name\">Theme</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> theme\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> theme</code></pre></div>\n<p>그리고 <code class=\"language-text\">styled-components.d.ts</code> 파일을 만듭니다.</p>\n<p>그다음 파일을 열고 아래와 같이 코드를 작성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token string\">\"styled-components\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Theme <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../styles/theme\"</span>\n\n<span class=\"token keyword\">declare</span> <span class=\"token keyword\">module</span> <span class=\"token string\">\"styled-components\"</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// eslint 적용 시 아래와 같이 ignore를 적용하지 않으면 lint 에러가 발생합니다.</span>\n  <span class=\"token comment\">// eslint를 적용하지 않았다면 아래 주석을 삭제하셔도 됩니다.</span>\n  <span class=\"token comment\">// eslint-disable-next-line @typescript-eslint/no-empty-interface</span>\n  <span class=\"token class-name\"><span class=\"token keyword\">export</span></span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">DefaultTheme</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Theme</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>만약 이 과정을 모두 마쳤다면 이제부터 코드를 이해하기 위해 내용을 풀어봅시다.</p>\n<p>먼저 styled-component module의 타입을 수정하기 위해 styled-components를 import 하고\n <code class=\"language-text\">declare module \"styled-components\"</code>를 작성합니다.</p>\n<p>그다음 Theme(Theme 객체의 typeof 타입)를 import 하여 <code class=\"language-text\">DefaultTheme</code> interface에 extends를 해서 DefaultTheme에 any 대신 Theme 타입이 적용되게 합니다.</p>\n<p>성공적으로 export 했다면 styled-components 코드에서 <code class=\"language-text\">${(props) => props.theme...}</code>를 입력할 때 타입이 아래와 같이 정상적으로 지정되는 것을 확인할 수 있습니다. (첫 번째 이미지와 비교해 보시면 이해하기 쉽습니다.)</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 591px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bb806c98c4638433916187f2f82c1e7c/e4c9a/declared.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12.658227848101264%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAwklEQVQI1z3Ky06DQABAUfZq4gwghXlQikCKFFpqgKG0Rt0a/TcXxr+9Jl24OLvjKaXZtR3jNDGdFrquo941vLy+MbqZYRzpR8fgTuwPz7SHPW65sHksOD4Z+q2hKCvcPLOcz3j3QjLMF6ptTaINcaKI4gSTZihtsNaibYq1KcZYjLVkm5w4SUh1dKWUIlqtuLm9w6tyw/vS0Tc5xTqmKTVlpmhLRV2ur1lKQeD7/6SUhEGAH4QE4QNCCL4+P/j9+eYP0pFW1xp8xoUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"타입 선언 후 불러온 theme 타입\"\n        title=\"타입 선언 후 불러온 theme 타입\"\n        src=\"/static/bb806c98c4638433916187f2f82c1e7c/e4c9a/declared.png\"\n        srcset=\"/static/bb806c98c4638433916187f2f82c1e7c/c26ae/declared.png 158w,\n/static/bb806c98c4638433916187f2f82c1e7c/6bdcf/declared.png 315w,\n/static/bb806c98c4638433916187f2f82c1e7c/e4c9a/declared.png 591w\"\n        sizes=\"(max-width: 591px) 100vw, 591px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>타입 선언 후 불러온 theme 타입</p>\n<h2>최종 결과물</h2>\n<h3>선언 전</h3>\n<iframe src=\"https://codesandbox.io/embed/original-method-8rcmzx?autoresize=1&fontsize=14&theme=dark\" style=\"width:100%;\" height=\"500px\"></iframe>\n<h3>선언 후</h3>\n<iframe src=\"https://codesandbox.io/embed/theme-with-declare-wf76qt?fontsize=14&hidenavigation=1&theme=dark\" style=\"width:100%;\" height=\"500px\"></iframe>","frontmatter":{"title":"styled-components의 theme에 타입 적용하기","date":"2022년 04월 05일","description":"잃어버린 styled-component theme의 타입을 찾아서...","thumbnail":null}},"previous":{"fields":{"slug":"/Binary-Search-Algorithm/"},"frontmatter":{"title":"Binary Search Algorithm"}},"next":null},"pageContext":{"id":"adbe820e-32d4-5d5d-a889-1b968e68bba0","previousPostId":"4db01028-53e7-5c70-83db-54c80a02304b","nextPostId":null}},
    "staticQueryHashes": ["3311626724"]}